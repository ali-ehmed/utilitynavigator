/*!
 * froala_editor v2.1.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FroalaEditor.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FroalaEditor.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FroalaEditor.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var i=t.selection.element(),r=t.selection.endElement();return"A"!=i.tagName&&(i=e(i).parents("a:first").get(0)),"A"!=r.tagName&&(r=e(r).parents("a:first").get(0)),r&&r==i?i:null}return"A"==t.$el.get(0).tagName&&t.core.hasFocus()?t.$el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function i(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var i,r,a,l;if(t.window.getSelection){var o=t.window.getSelection();if(o.getRangeAt&&o.rangeCount){l=t.document.createRange();for(var s=0;s<o.rangeCount;++s)if(i=o.getRangeAt(s),r=i.commonAncestorContainer,r&&1!=r.nodeType&&(r=r.parentNode),r&&"a"==r.nodeName.toLowerCase())n.push(r);else{a=r.getElementsByTagName("a");for(var d=0;d<a.length;++d)l.selectNodeContents(a[d]),l.compareBoundaryPoints(i.END_TO_START,i)<1&&l.compareBoundaryPoints(i.START_TO_END,i)>-1&&n.push(a[d])}}}else if(t.document.selection&&"Control"!=t.document.selection.type)if(i=t.document.selection.createRange(),r=i.parentElement(),"a"==r.nodeName.toLowerCase())n.push(r);else{a=r.getElementsByTagName("a"),l=t.document.body.createTextRange();for(var p=0;p<a.length;++p)l.moveToElementText(a[p]),l.compareEndPoints("StartToEnd",i)>-1&&l.compareEndPoints("EndToStart",i)<1&&n.push(a[p])}}return n}function r(i){setTimeout(function(){if(!i||i&&(1==i.which||"mouseup"!=i.type)){var r=n(),l=t.image?t.image.get():null;if(r&&!l){if(t.image){var o=t.node.contents(r);if(1==o.length&&"IMG"==o[0].tagName)return e(o[0]).trigger("click"),!1}i&&i.stopPropagation(),a(r)}else t.popups.hide("link.edit")}},t.helpers.isIOS()?100:0)}function a(n){var i=t.popups.get("link.edit");i||(i=o());var r=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",e(t.opts.scrollableContainer));var a=r.offset().left+e(n).outerWidth()/2,l=r.offset().top+r.outerHeight();t.popups.show("link.edit",a,l,r.outerHeight())}function l(){t.popups.hide("link.edit")}function o(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.$el.get(0).tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var i={buttons:e},r=t.popups.create("link.edit",i);return t.$wp&&t.$wp.on("scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&a(n())}),t.events.on("destroy",function(){t.$wp&&t.$wp.off("scroll.link-edit")}),r}function s(){}function d(){var i=t.popups.get("link.insert"),r=n();if(r){var a,l,o=e(r),s=i.find('input.fr-link-attr[type="text"]'),d=i.find('input.fr-link-attr[type="checkbox"]');for(a=0;a<s.length;a++)l=e(s[a]),l.val(o.attr(l.attr("name")||""));for(d.prop("checked",!1),a=0;a<d.length;a++)l=e(d[a]),o.attr(l.attr("name"))==l.data("checked")&&l.prop("checked",!0);i.find('input.fr-link-attr[type="text"][name="text"]').val(o.text())}else i.find('input.fr-link-attr[type="text"]').val(""),i.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),i.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());i.find("input.fr-link-attr").trigger("change");var p=t.image?t.image.get():null;p?i.find('.fr-link-attr[name="text"]').parent().hide():i.find('.fr-link-attr[name="text"]').parent().show()}function p(){var n=t.$tb.find('.fr-command[data-cmd="insertLink"]'),i=t.popups.get("link.insert");if(i||(i=f()),!i.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||e(t.opts.scrollableContainer)),n.is(":visible")){var r=n.offset().left+n.outerWidth()/2,a=n.offset().top+(t.opts.toolbarBottom?10:n.outerHeight()-10);t.popups.show("link.insert",r,a,n.outerHeight())}else t.position.forSelection(i),t.popups.show("link.insert")}function f(){var e="";t.opts.linkInsertButtons.length>=1&&(e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',r="",a=0;r='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',r+='<div class="fr-input-line"><input name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++a+'"></div>',t.opts.linkText&&(r+='<div class="fr-input-line"><input name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++a+'"></div>');for(var l in t.opts.linkAttributes){var o=t.opts.linkAttributes[l];r+='<div class="fr-input-line"><input name="'+l+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(o)+'" tabIndex="'+ ++a+'"></div>'}t.opts.linkAlwaysBlank||(r+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++a+'"><span>'+i+'</span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),r+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="linkInsert" href="#" tabIndex="'+ ++a+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var p={buttons:e,input_layer:r},f=t.popups.create("link.insert",p);return t.popups.onRefresh("link.insert",d),t.popups.onHide("link.insert",s),t.$wp&&t.$wp.on("scroll.link-insert",function(){var e=t.image?t.image.get():null;e&&t.popups.isVisible("link.insert")&&E(),n&&t.popups.isVisible("link.insert")&&v()}),t.events.on("destroy",function(){t.$wp&&t.$wp.off("scroll.link-insert")}),f}function c(){var i=n(),r=t.image?t.image.get():null;return t.events.trigger("link.beforeRemove",[i])===!1?!1:void(r&&i?(r.unwrap(),r.trigger("click")):i&&(t.selection.save(),e(i).replaceWith(e(i).html()),t.selection.restore(),l()))}function u(){t.events.on("keyup",function(t){t.which!=e.FroalaEditor.KEYCODE.ESC&&r(t)}),t.events.on("window.mouseup",r)}function k(n){var i,r,a=t.opts.linkList[n],l=t.popups.get("link.insert"),o=l.find('input.fr-link-attr[type="text"]'),s=l.find('input.fr-link-attr[type="checkbox"]');for(r=0;r<o.length;r++)i=e(o[r]),a[i.attr("name")]?i.val(a[i.attr("name")]):i.val("");for(r=0;r<s.length;r++)i=e(s[r]),i.prop("checked",i.data("checked")==a[i.attr("name")])}function g(){var n,i,r=t.popups.get("link.insert"),a=r.find('input.fr-link-attr[type="text"]'),l=r.find('input.fr-link-attr[type="checkbox"]'),o=a.filter('[name="href"]').val(),s=a.filter('[name="text"]').val(),d={};for(i=0;i<a.length;i++)n=e(a[i]),["href","text"].indexOf(n.attr("name"))<0&&(d[n.attr("name")]=n.val());for(i=0;i<l.length;i++)n=e(l[i]),n.is(":checked")?d[n.attr("name")]=n.data("checked"):d[n.attr("name")]=n.data("unchecked");var p=e(t.original_window).scrollTop();m(o,s,d),e(t.original_window).scrollTop(p)}function h(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var i=e(n.pop());i.removeClass("fr-unprocessed");var r=t.node.deepestParent(i.get(0));if(r){var a=i.get(0),l="",o="";do a=a.parentNode,t.node.isBlock(a)||(l+=t.node.closeTagString(a),o=t.node.openTagString(a)+o);while(a!=r);var s=t.node.openTagString(i.get(0))+i.html()+t.node.closeTagString(i.get(0));i.replaceWith('<span id="fr-break"></span>');var d=e(r).html();d=d.replace(/<span id="fr-break"><\/span>/g,l+s+o),e(r).html(d)}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function m(a,l,o){"undefined"==typeof o&&(o={});var s=t.image?t.image.get():null;s||"A"==t.$el.get(0).tagName?"A"==t.$el.get(0).tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var d=a;if(t.opts.linkConvertEmailAddress){var p=/^[\w._]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i;p.test(a)&&0!==a.indexOf("mailto:")&&(a="mailto:"+a)}if(0===a.indexOf("tel:")||0===a.indexOf("sms:")||0===a.indexOf("mailto:")||0===a.indexOf("notes:")||0===a.indexOf("data:image")||""===t.opts.linkAutoPrefix||/^(https?:|ftps?:|)\/\//.test(a)||(a=t.opts.linkAutoPrefix+a),a=t.helpers.sanitizeURL(a),t.opts.linkAlwaysBlank&&(o.target="_blank"),t.opts.linkAlwaysNoFollow&&(o.rel="nofollow"),l=l||"",a===t.opts.linkAutoPrefix){var f=t.popups.get("link.insert");return f.find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[d]),!1}var c,u=n();if(u){c=e(u);var k=t.node.rawAttributes(u);for(var g in k)"class"!=g&&"style"!=g&&c.removeAttr(g);c.attr("href",a),l.length>0&&c.text()!=l&&!s&&c.text(l),s||c.prepend(e.FroalaEditor.START_MARKER).append(e.FroalaEditor.END_MARKER),c.attr(o),s||t.selection.restore()}else{s?s.wrap('<a href="'+a+'"></a>'):(t.document.execCommand("unlink",!1,!1),t.selection.isCollapsed()?(l=0===l.length?d:l,t.html.insert('<a href="'+a+'">'+e.FroalaEditor.START_MARKER+l+e.FroalaEditor.END_MARKER+"</a>"),t.selection.restore()):l.length>0&&l!=t.selection.text()?(t.selection.remove(),t.html.insert('<a href="'+a+'">'+e.FroalaEditor.START_MARKER+l+e.FroalaEditor.END_MARKER+"</a>"),t.selection.restore()):(h(),t.document.execCommand("createLink",!1,a)));for(var m=i(),v=0;v<m.length;v++)c=e(m[v]),c.attr(o),c.removeAttr("_moz_dirty");1==m.length&&t.$wp&&!s&&(e(m[0]).prepend(e.FroalaEditor.START_MARKER).append(e.FroalaEditor.END_MARKER),t.selection.restore())}s?(s.trigger("touchstart"),s.trigger(t.helpers.isMobile()?"touchend":"click")):(t.popups.get("link.insert"),r())}function v(){l();var i=n();if(i){var r=t.popups.get("link.insert");r||(r=f()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var a=(t.image?t.image.get():null)||e(i),o=a.offset().left+a.outerWidth()/2,s=a.offset().top+a.outerHeight();t.popups.show("link.insert",o,s,a.outerHeight())}}function b(){var e=t.image?t.image.get():null;if(e)e.trigger("click").trigger("touchend");else{t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var i=n();i&&t.$wp?(t.selection.restore(),l(),r()):"A"==t.$el.get(0).tagName?(t.$el.focus(),r()):(t.popups.hide("link.insert"),t.toolbar.showInline())}}function E(){var n=t.image?t.image.get():null;if(n){var i=t.popups.get("link.insert");i||(i=f()),d(!0),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var r=n.offset().left+n.outerWidth()/2,a=n.offset().top+n.outerHeight();t.popups.show("link.insert",r,a,n.outerHeight())}}function x(i){var r=n();if(!r)return!1;if(!t.opts.linkMultipleStyles){var a=Object.keys(t.opts.linkStyles);a.splice(a.indexOf(i),1),e(r).removeClass(a.join(" "))}e(r).toggleClass(i)}return{_init:u,remove:c,showInsertPopup:p,usePredefined:k,insertCallback:g,insert:m,update:v,get:n,allSelected:i,back:b,imageLink:E,applyStyle:x}},e.FroalaEditor.DefineIcon("insertLink",{NAME:"link"}),e.FroalaEditor.RegisterShortcut(75,"insertLink"),e.FroalaEditor.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FroalaEditor.DefineIcon("linkOpen",{NAME:"external-link"}),e.FroalaEditor.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.original_window.open(e.href)}}),e.FroalaEditor.DefineIcon("linkEdit",{NAME:"edit"}),e.FroalaEditor.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,callback:function(){this.link.update()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FroalaEditor.DefineIcon("linkRemove",{NAME:"unlink"}),e.FroalaEditor.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FroalaEditor.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FroalaEditor.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get(),n=this.image?this.image.get():null;n||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FroalaEditor.DefineIcon("linkList",{NAME:"search"}),e.FroalaEditor.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li><a class="fr-command" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FroalaEditor.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){var t=this.link.get();t?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FroalaEditor.DefineIcon("imageLink",{NAME:"link"}),e.FroalaEditor.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,callback:function(){this.link.imageLink()},refresh:function(e){var t,n=this.link.get();n?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FroalaEditor.DefineIcon("linkStyle",{NAME:"magic"}),e.FroalaEditor.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.linkStyles;for(var n in t)e+='<li><a class="fr-command" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var i=this.link.get();if(i){var r=e(i);n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",r.hasClass(t))})}}})});