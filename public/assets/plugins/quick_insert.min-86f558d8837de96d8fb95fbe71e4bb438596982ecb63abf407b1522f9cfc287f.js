/*!
 * froala_editor v2.1.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){"use strict";e.extend(e.FroalaEditor.DEFAULTS,{quickInsertOffset:10,quickInsertButtons:["image","table","ul","ol","hr","paragraph"]}),e.FroalaEditor.QUICK_INSERT_BUTTONS={image:{icon:"insertImage",callback:function(t){e(t).after('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">');var i=this;e(t).next().on("change",function(){if(this.files){var a=t.parentNode,r=a.parentNode;"OL"==r.tagName||"UL"==r.tagName?e(a).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):e(a).replaceWith("<p>"+e.FroalaEditor.MARKERS+"<br></p>"),i.quickInsert.hide(!0),i.selection.restore(),i.image.showInsertPopup();var n=i.popups.get("image.insert");i.position.forSelection(n),i.image.upload(this.files)}}),e(t).next().trigger("click")},requiredPlugin:"image",title:"Insert Image"},table:{icon:"insertTable",callback:function(t){var i=t.parentNode,a=i.parentNode;"OL"==a.tagName||"UL"==a.tagName?e(i).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):e(i).replaceWith("<p>"+e.FroalaEditor.MARKERS+"<br></p>"),this.quickInsert.hide(!0),this.selection.restore(),this.table.insert(2,2),this.undo.saveStep()},requiredPlugin:"table",title:"Insert Table"},ol:{icon:"formatOL",callback:function(t){var i=t.parentNode,a=i.parentNode;"OL"==a.tagName||"UL"==a.tagName?e(i).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):e(i).replaceWith("<p>"+e.FroalaEditor.MARKERS+"<br></p>"),this.quickInsert.hide(!0),this.selection.restore(),"UL"==a.tagName&&this.lists.format(a.tagName),"OL"!=a.tagName&&this.lists.format("OL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Ordered List"},ul:{icon:"formatUL",callback:function(t){var i=t.parentNode,a=i.parentNode;"OL"==a.tagName||"UL"==a.tagName?e(i).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):e(i).replaceWith("<p>"+e.FroalaEditor.MARKERS+"<br></p>"),this.quickInsert.hide(!0),this.selection.restore(),"OL"==a.tagName&&this.lists.format(a.tagName),"UL"!=a.tagName&&this.lists.format("UL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Unordered List"},hr:{icon:"insertHR",callback:function(t){var i=t.parentNode,a=i.parentNode;"OL"==a.tagName||"UL"==a.tagName?e(i).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):e(i).replaceWith("<p>"+e.FroalaEditor.MARKERS+"<br></p>"),this.quickInsert.hide(!0),this.selection.restore(),this.commands.insertHR(),this.undo.saveStep()},title:"Insert Horizontal Line"},paragraph:{icon:"paragraphFormat",callback:function(t){var i=t.parentNode,a=i.parentNode;if("OL"==a.tagName||"UL"==a.tagName)e(i).replaceWith("<li>"+e.FroalaEditor.MARKERS+"<br></li>");else{var r=this.html.defaultTag();r?e(i).replaceWith("<"+r+">"+e.FroalaEditor.MARKERS+"<br></"+r+">"):e(i).replaceWith(e.FroalaEditor.MARKERS+"<br>")}this.quickInsert.hide(!0),this.selection.restore(),this.undo.saveStep()},title:"Break"}},e.FroalaEditor.RegisterQuickInsertCommand=function(t,i){e.FroalaEditor.QUICK_INSERT_BUTTONS[t]=i},e.FroalaEditor.PLUGINS.quickInsert=function(t){function i(i,a){if(h&&!a&&p.hasClass("fr-visible"))return!1;var r,n,o,s;if(s=i.parent(),r=i.offset().top,o=s.outerWidth(),n=t.$box.offset().left,t.opts.iframe&&(r+=t.$iframe.offset().top-e(t.original_window).scrollTop()),r-=t.window.pageYOffset,n=n-t.window.pageXOffset-p.find("> a").outerWidth(),p.css("top",r),p.css("left",n),p.css("width",i.offset().left-n),p.css("height",2*Math.ceil(parseFloat(i.outerHeight())/2)),p.find("> a.fr-floating-btn").outerHeight()>i.outerHeight()||i.hasClass("fr-qi-helper")){var l=p.outerHeight();p.height(p.find("> a.fr-floating-btn").outerHeight()),p.css("top",r-(p.find("> a.fr-floating-btn").outerHeight()-l)/2)}p.data("tag",i),p.addClass("fr-visible")}function a(i){if(i){var a=e(i);if(0===t.$el.find(a).length)return o(),null;if(i.nodeType!=Node.TEXT_NODE&&t.node.isBlock(i)&&["TR","TH","TD","TBODY","THEAD","TABLE"].indexOf(i.tagName)<0)return a;if(t.node.blockParent(a.get(0)))return i=t.node.blockParent(a.get(0)),["TR","TH","TD","TBODY","THEAD","TABLE"].indexOf(i.tagName)>=0?(o(),!1):e(i)}return o(),null}function r(r){if(m=null,t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible"))return!1;if(t.popups.areVisible())return!1;var n,s,l,d=null,f=t.document.elementFromPoint(r.pageX-t.window.pageXOffset,r.pageY-t.window.pageYOffset);if(t.node.isElement(f))for(n=1;n<=t.opts.quickInsertOffset;n++){if(s=t.document.elementFromPoint(r.pageX-t.window.pageXOffset,r.pageY-t.window.pageYOffset-n),s&&!t.node.isElement(s)&&s!=t.$wp.get(0)&&e(s).parents(t.$wp).length){d=a(s);break}if(l=t.document.elementFromPoint(r.pageX-t.window.pageXOffset,r.pageY-t.window.pageYOffset+n),l&&!t.node.isElement(l)&&l!=t.$wp.get(0)&&e(l).parents(t.$wp).length){d=a(l);break}}else d=a(f);if(d){var u=d.parent().get(0);["UL","OL"].indexOf(u.tagName)>=0&&(u=u.parentNode),r.pageX-t.window.pageXOffset-d.offset().left<d.outerWidth()/2&&u==t.$el.get(0)?i(d):o()}}function n(e){g===!1&&(m&&clearTimeout(m),m=setTimeout(r,30,e))}function o(e){return e&&(h=!1),h?!1:(m&&clearTimeout(m),t.html.checkIfEmpty(),void p.removeClass("fr-visible fr-on"))}function s(){g=!0,o()}function l(){g=!1}function d(a){if(a.preventDefault(),h)f();else{for(var r=p.data("tag"),n=t.opts.quickInsertButtons,o=t.node.isEmpty(r.get(0))&&["DIV","P"].indexOf(r.get(0).tagName)>=0,s='<div class="fr-qi-helper"'+(o?' data-fr-empty="'+r.get(0).outerHTML+'"':"")+">",l=0,d=0;d<n.length;d++){var u=e.FroalaEditor.QUICK_INSERT_BUTTONS[n[d]];u&&(!u.requiredPlugin||e.FroalaEditor.PLUGINS[u.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(u.requiredPlugin)>=0)&&(s+='<a class="fr-btn" role="button" title="'+t.language.translate(u.title)+'" tabindex="-1" data-cmd="'+n[d]+'" style="transition-delay: '+.025*l++ +'s;">'+t.icon.create(u.icon)+"</a>")}s+="</div>",t.node.isEmpty(r.get(0))&&["DIV","P"].indexOf(r.get(0).tagName)>=0?r.replaceWith(s):r.before(s),setTimeout(function(){t.$el.find(".fr-qi-helper > a").addClass("fr-size-1"),i(t.$el.find(".fr-qi-helper")),p.addClass("fr-on"),h=!0},10)}}function f(){var e=t.$el.find(".fr-qi-helper");e.data("fr-empty")?e.replaceWith(e.data("fr-empty")):e.remove(),h=!1,o()}function u(){p=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Break")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.$box.append(p),t.events.on("destroy",function(){p.html("").removeData().remove()},!0),t.events.on("focus",f,!0),t.events.on("window.mousedown",f,!0),t.events.on("commands.before",f,!0),p.on("mousemove",function(e){e.stopPropagation()}),p.on("mousedown","a",function(e){e.stopPropagation()}),p.on("click","a",d),t.events.bindClick(t.$el,".fr-qi-helper > a.fr-btn",function(i){var a=e(i.currentTarget).data("cmd");e.FroalaEditor.QUICK_INSERT_BUTTONS[a].callback.apply(t,[i.currentTarget])}),t.tooltip.bind(t.$el,".fr-qi-helper > a.fr-btn"),t.events.on("destroy",function(){p.off("mouseleave.quickInsert"),p.off("mousedown"),p.off("mousedown","a"),p.off("click","a")},!0)}function c(){return t.$wp?(t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),u(),g=!1,t.$window.on("mousemove.quickInsert"+t.id,n),e(t.window).on("scroll.quickInsert"+t.id,function(){h?i(t.$el.find(".fr-qi-helper"),!0):o()}),e(t.window).on("mousedown.quickInsert"+t.id,s),e(t.window).on("mouseup.quickInsert"+t.id,l),t.events.on("html.get",function(e){return e=e.replace(/<(div)((?:[\w\W]*?))class="([\w\W]*?)fr-qi-helper([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/(div)>/g,"")}),void t.events.on("destroy",function(){t.$window.off("mousemove.quickInsert"+t.id),e(t.window).off("scroll.quickInsert"+t.id),e(t.window).off("mousedown.quickInsert"+t.id),e(t.window).off("mouseup.quickInsert"+t.id)},!0)):!1}var p,g,m,h=!1;return{_init:c,hide:o}}});