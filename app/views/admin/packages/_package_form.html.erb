<%= simple_form_for [:admin, @package], url: @url, method: @http_method do |f| %>
	<fieldset class="inputs">
		<legend><span>General Details of Package</span></legend>
		<ol>
			<li class="string input optional stringish" id="package_name_input">
				<%= f.input :package_name, input_html: { value: params[:package] ? params[:package][:package_name] : @package.try(:package_name) } %>
			</li>
			<li class="string input optional stringish">
				<%= f.label :package_description %>
				<br />
				<%= f.input :package_description, label: false, input_html: { class: "package-editor", value: params[:package] ? params[:package][:package_description] : @package.try(:package_description) } %>
			</li>
			<li class="string input optional stringish">
				<%= f.label :plan_details %>
				<br />
				<%= f.input :plan_details, label: false, input_html: { class: "package-editor", value: params[:package] ? params[:package][:plan_details] : @package.try(:plan_details) } %>
			</li>
			<li class="string input optional stringish" id="package_price_info_input">
				<%= f.input :price_info, input_html: { onblur: "$packages.packageCharacterLengthValidation(this, 72);", value: params[:package] ? params[:package][:price_info] : @package.try(:price_info) } %>
				<strong>Hint: </strong>Price Info should not be more than 70 characters
			</li>
			<li class="string input optional stringish" id="package_price_input">
				<%= f.input :price, input_html: { onblur: "$packages.packagePriceValidation(this);", value: params[:package] ? params[:package][:price] : @package.try(:price) } %>
			</li>
			<li class="string input optional stringish" id="package_monthly_fee_after_promotion_input">
				<%= f.input :monthly_fee_after_promotion, input_html: { onblur: "$packages.packageCharacterLengthValidation(this, 50);", value: params[:package] ? params[:package][:monthly_fee_after_promotion] : @package.try(:monthly_fee_after_promotion) } %>
				<strong>Hint: </strong>Monthly Fee Text should not be more than 70 characters
			</li>
			<li class="string input optional stringish" id="package_installation_price_input">
				<%= f.input :installation_price, input_html: { onblur: "$packages.packagePriceValidation(this);", value: params[:package] ? params[:package][:installation_price] : @package.try(:installation_price) } %>
			</li>
			<li class="string input optional stringish" id="package_self_installation_input">
				<%= f.input :self_installation, :as => :select, :collection => [["Include", true], ["Not Include", false]], selected: params[:package] ? params[:package][:self_installation] : @package.try(:self_installation) %>
			</li>
			<li class="string input optional stringish">
				<%= f.label :promotions %>
				<br />
				<%= f.input :promotions, label: false, input_html: { class: "package-editor", value: params[:package] ? params[:package][:promotions] : @package.try(:promotions) } %>
			</li>
		</ol>
	</fieldset>
	<fieldset class="inputs">
		<legend><span>Select Provider &amp; Package Type</span></legend>
		<ol>
			<% if @package.new_record? %>
				<li>
					<%= f.association :provider,:as => :select,:include_blank => "--Select--", input_html: { onchange: "$packages.validatingProvider(this);" } %>
				</li>
				<li>
					<%= f.association :package_type,:as => :select,:include_blank => "--Select--", input_html: { onchange: "$packages.enableProducts(this);" } %>
				</li>
			<% else %>
				<li>
					<%= f.association :provider,:as => :select,:include_blank => "--Select--", input_html: { onchange: "$packages.validatingProvider(this);" }, disabled: true %>
				</li>
				<li>
					<%= f.association :package_type,:as => :select,:include_blank => "--Select--", input_html: { onchange: "$packages.enableProducts(this);" }, disabled: true %>
				</li>
			<% end %>
			<li>
				<fieldset class="choices package-products">
					<legend class="label"><label>Choose Products</label></legend>
					<ol class="choices-group">
						<li class="product-errors"></li>

						<% if @package.new_record? %>
							<% Product.all.each do |product| %>
								<li class="choice">
									<%= check_box_tag "product_ids[]", product.id, false, onchange: "$packages.validatingProducts(this);" %>

									<%= product.name %>
								</li>
							<% end %>
						<% else %>

							<% @package.package_bundles.each do |p_bundle| %>
								<li class="choice">
									<strong>
										<%= p_bundle.product.try(:name) %>
									</strong>
									<br />
									<small>
										<%= link_to "Edit ordering items for #{p_bundle.product.try(:name)}", edit_ordering_items_admin_package_path(@package.id, product_id: p_bundle.product_id) %>
										<!-- | <%#= link_to "Remove Product", remove_package_product_admin_package_path(@package.id, product_id: p_bundle.product_id), method: :delete, data: { confirm: "Are you sure?" } %> -->
									</small>
								</li>
							<% end %>

							<%# unless @package.package_bundles.count >= 3 %>
								<!-- <br /> -->
								<%#= link_to "Add New", "" %>
							<%# end %>

						<% end %>
					</ol>
				</fieldset>
			</li>
		</ol>
	</fieldset>
	<fieldset class="actions">
		<ol>
			<li class="action input_action " id="provider_submit_action">
				<%= f.button :submit, @package.new_record? ? "Next" : "Update Package" %>
			</li>
			<li class="cancel"><%= link_to "Cancel", admin_packages_path %></li>
		</ol>
	</fieldset>
<% end %>
